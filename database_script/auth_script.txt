DROP TABLE IF EXISTS SMSUserTbl CASCADE;
CREATE TABLE SMSUserTbl (
	ID SERIAL PRIMARY KEY,
	Userkey TEXT NOT NULL,
	PASSWORD TEXT NOT NULL,
	STATUS TEXT,
	LOGIN_METHOD_ID INT
);


DROP TABLE IF EXISTS LoginMethodTbl CASCADE;
CREATE TABLE LoginMethodTbl (
	ID SERIAL PRIMARY KEY,
	LOGIN_TYPE TEXT,
	URL TEXT,
	PRIORITY INT 
);

DROP TABLE IF EXISTS GlobalPermissionTbl CASCADE;
CREATE TABLE GlobalPermissionTbl (
	ID SERIAL PRIMARY KEY,
	USER_ID INT,
	PERMISSION TEXT
);

DROP TABLE IF EXISTS PermissionTbl CASCADE;
CREATE TABLE PermissionTbl (
	ID SERIAL PRIMARY KEY,
	TARGET_TYPE TEXT DEFAULT NULL,
	TARGET_ID INT,
	PERMISSION TEXT,
	USER_ID INT,
	GROUP_ID INT
);

DROP TABLE IF EXISTS SMSGroupTbl CASCADE;
CREATE TABLE SMSGroupTbl (
	ID SERIAL PRIMARY KEY,
	GROUP_NAME TEXT,
	DESCRIPTION TEXT
);

DROP TABLE IF EXISTS GroupUserMappingTbl CASCADE;
CREATE TABLE GroupUserMappingTbl (
	ID SERIAL PRIMARY KEY,
	GROUP_ID INT,
	USER_ID INT
);


INSERT INTO GlobalPermissionTbl (USER_ID, PERMISSION) VALUES (1, 'admin');
INSERT INTO GlobalPermissionTbl (USER_ID, PERMISSION) VALUES (1, 'mod');
INSERT INTO GlobalPermissionTbl (USER_ID, PERMISSION) VALUES (3, 'mod');


INSERT INTO SMSUserTbl (USERKEY, PASSWORD, STATUS, LOGIN_METHOD_ID) VALUES ('admin', '123', 'active', 1);
INSERT INTO SMSUserTbl (USERKEY, PASSWORD, STATUS, LOGIN_METHOD_ID) VALUES ('mod', '123', 'active', 1);
INSERT INTO SMSUserTbl (USERKEY, PASSWORD, STATUS, LOGIN_METHOD_ID) VALUES ('user', '123', 'active', 1);
INSERT INTO SMSUserTbl (USERKEY, PASSWORD, STATUS, LOGIN_METHOD_ID) VALUES ('user_in_group', '123', 'active', 1);


INSERT INTO LoginMethodTbl (LOGIN_TYPE, URL, PRIORITY) VALUES ('normal', null, 0);
INSERT INTO LoginMethodTbl (LOGIN_TYPE, URL, PRIORITY) VALUES ('ldap', 'ldap://server.splus.com:389/cn=users,dc=splus,dc=com', 1);

INSERT INTO PermissionTbl (TARGET_TYPE, TARGET_ID, PERMISSION, USER_ID, GROUP_ID)
		VALUES ('service', 1, 'read', 1, null);


INSERT INTO SMSGroupTbl (GROUP_NAME, DESCRIPTION) VALUES ('group_1', 'This is group 1');
INSERT INTO SMSGroupTbl (GROUP_NAME, DESCRIPTION) VALUES ('group_2', 'This is group 2');
INSERT INTO GroupUserMappingTbl (GROUP_ID, USER_ID) VALUES (1, 4);
INSERT INTO GroupUserMappingTbl (GROUP_ID, USER_ID) VALUES (1, 3);
INSERT INTO GroupUserMappingTbl (GROUP_ID, USER_ID) VALUES (2, 4);


